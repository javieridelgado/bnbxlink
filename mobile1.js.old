if (Meteor.isClient) {
    var isPressed = false;
    var prevColor;
    var container_el = $('#container')[0];
    var pullrefresh_el = $('#pullrefresh')[0];
    var pullrefresh_icon_el = $('#pullrefresh-icon')[0];

    /*var refresh = new myApp.PullToRefresh(container_el, pullrefresh_el, pullrefresh_icon_el);

    // update image onrefresh
    refresh.handler = function() {
        var self = this;
        // a small timeout to demo the loading state
        setTimeout(function() {
            $( "#container" ).prepend( "<p>Test</p>" );
            self.slideUp();
        }, 1000);
    };*/

    Template.birthdays.rendered = function () {
        $('div.bnbpanel').hammer({
            drag_min_distance: 1,
            swipe_velocity: 0.1
        });
    };

    Template.birthdays.events({
        'click div.panel': function (e, t) {
            $("div.panel").prepend("<p>Click</p>");
            e.preventDefault();
        },
        'press div.bnbpanel': function (e, t) {
            /*$("div.bnbpanel").find("*").animate({
                backgroundColor: 'yellow',
                opacity: '0.5'
            });*/
            $("div.bnbpanel").find("*").css("background-color", "yellow");
            Session.set("isPressed", "true");
            e.preventDefault();
        },
        'pressup div.bnbpanel': function (e, t) {
            $("div.bnbpanel").removeAttr('style');
            $("div.bnbpanel").find("*").removeAttr('style');
            Session.set("isPressed", "false");
            e.preventDefault();
        },
        'pan div.bnbpanel': function (e, t) {
            if (Session.get("isPressed") == "true") {
                $("div.bnbpanel").css({top: e.deltaY, left: e.deltaX, position:'absolute'});
                BNBLink.log(e.type + ": set position to (" + e.deltaX + ", " + e.deltaY + ")");
            }
            e.preventDefault();
        },
        'swipeleft div.panel': function (e, t) {
            $("#container").prepend("<p>Swipe Left</p>");
            e.preventDefault();
        },
        'swiperight div.panel': function (e, t) {
            $("#container").prepend("<p>Swipe Right</p>");
            e.preventDefault();
        }
    });

}

if (Meteor.isServer) {
    Meteor.startup(function () {
        // code to run on server at startup
    });    
}